<div class="container pt-5 pb-5" style="min-height: 650px;" *ngIf="isAdmin">
    <div class="row">

    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="col-sm-12 responsive_table" *ngIf="rowsAdded1">
                <table mat-table class="mat-elevation-z8 mb-4" [dataSource]="dataSource1" style="width:100%" matSort>

                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Product Link</th>
                        <td mat-cell *matCellDef="let element">
                            <a href="{{marketPlaceLinkEnv}}{{element.id}}">Visit Product</a>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="medicineName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Product Name</th>
                        <td mat-cell *matCellDef="let element"> {{element.medicineName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="imagePath">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Product Image</th>
                        <td mat-cell *matCellDef="let element">
                            <img src="{{marketPlaceImgEnv}}{{element.imagePath}}" height="100px" width="100px">
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="discountPercent">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Discount %</th>
                        <td mat-cell *matCellDef="let element" class="pb-3 pt-3">
                            <span>Current Discount : <b>{{element.discountPercent}}%</b></span>

                            <form [formGroup]="percentUpdateForm" id="form_{{element.id}}">

                                <div class="row pt-0">
                                    <div class="col-4 d-flex align-items-center">

                                        <mat-form-field appearance="outline" class="pt-3">
                                            <mat-label>Discount %<span style="color: red;"></span></mat-label><br />
                                            <input matInput maxlength="6" inputmode="text" placeholder="Discount %" title="Update discount"
                                                formControlName="DiscountPercent" #nameInput>

                                            <mat-error *ngIf="checkError('DiscountPercent', 'required')">Discount is
                                                required</mat-error>
                                        </mat-form-field>
                                    </div>

                                    <!-- <div class="row pt-3"> -->
                                    <div class="col-4 d-flex align-items-center">
                                        <button type="button" class="btn btn-warning" type="submit" style="width: 100px;"
                                            (click)="onDiscountSubmit(element.id)">Submit</button>
                                    </div>
                                    <!-- </div> -->



                                </div>

                            </form>

                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                </table>

                <mat-paginator [pageSizeOptions]="[10, 25, 50, 100, 200]" showFirstLastButtons></mat-paginator>
            </div>
        </div>
    </div>
</div>



<div class="container pt-5 pb-5" style="min-height: 650px;" *ngIf="isAffliate">
    <div class="row">

    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="col-sm-12 responsive_table" *ngIf="rowsAdded2">
                <table mat-table class="mat-elevation-z8 mb-4" [dataSource]="dataSource2" style="width:100%" matSort>

                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 20%;">Product Link</th>
                        <td mat-cell *matCellDef="let element" class="p-3">
                            <a href="{{marketPlaceLinkEnv}}{{element.id}}">Visit Product</a>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="medicineName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 30%;">Product Name</th>
                        <td mat-cell *matCellDef="let element" class="p-3"> {{element.medicineName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="imagePath">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 20%;">Product Image</th>
                        <td mat-cell *matCellDef="let element" class="p-3">
                            <img src="{{marketPlaceImgEnv}}{{element.imagePath}}" height="100px" width="100px">
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="discountPercent">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 30%;">Discount %</th>
                        <td mat-cell *matCellDef="let element" class="p-3">
                            <!-- <b>{{element.discountPercent}} %</b>&nbsp;Discount on this product -->
                            Affiliate will get <b>{{affiliateCommision.toFixed(2)}} %</b> commission on this product
                            <table>
                                <tr>
                                    <td style="">
                                        <span (click)="CopyToClipboard(element.id)">{{marketPlaceLinkEnv}}{{element.id}}&aCode={{EncodeAffliateLink(element.id)}}</span>
                                    </td>
                                    <td>
                                        <a href="javascript:void(0);" (click)="CopyToClipboard(element.id)" title="Copy to Clipboard">
                                        <img src="{{imageLoc}}copytoclipboard.svg" alt="" height="50px" width="50px">
                                    </a>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                </table>

                <mat-paginator [pageSizeOptions]="[10, 25, 50, 100, 200]" showFirstLastButtons></mat-paginator>
            </div>
        </div>
    </div>
</div>